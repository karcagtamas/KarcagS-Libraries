@using System.Linq.Expressions

<MudTextField T="string?" Value="Value" ValueChanged="ValueChanged" Style="@Style" Class="@Class" Variant="Variant.Outlined" Margin="Margin.Dense" Clearable="Clearable" Placeholder="@Placeholder" Label="@Label" TextChanged="TextChanged" For="For" Required="Required" FullWidth="FullWidth" Lines="Lines" InputType="FieldType" AdornmentIcon="@AdornmentIcon" OnAdornmentClick="OnAdornmentClick" Adornment="Adornment.End" Disabled="Disabled" ReadOnly="ReadOnly"/>

@code {

    [Parameter, EditorRequired]
    public required string Label { get; set; } = null!;

    [Parameter]
    public string Placeholder { get; set; } = null!;

    [Parameter]
    public string Style { get; set; } = null!;

    [Parameter]
    public string Class { get; set; } = null!;

    [Parameter]
    public bool Clearable { get; set; }

    [Parameter]
    public string Value { get; set; } = null!;

    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public bool FullWidth { get; set; }

    [Parameter]
    public int Lines { get; set; } = 1;

    [Parameter]
    public bool IsPassword { get; set; }

    [Parameter]
    public bool IsEmail { get; set; }

    [Parameter]
    public EventCallback<string?> ValueChanged { get; set; }

    [Parameter]
    public EventCallback<string> TextChanged { get; set; }

    [Parameter]
    public Expression<Func<string?>>? For { get; set; }

    [Parameter]
    public string AdornmentIcon { get; set; } = null!;

    [Parameter]
    public EventCallback OnAdornmentClick { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public bool ReadOnly { get; set; }

    private InputType FieldType
    {
        get
        {
            if (IsPassword)
            {
                return InputType.Password;
            }

            if (IsEmail)
            {
                return InputType.Email;
            }

            return InputType.Text;
        }
    }

}