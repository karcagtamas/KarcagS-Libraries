@using System.Linq.Expressions

@typeparam T
@typeparam TItem

<MudSelect T="T" Label="@Label" Placeholder="@Placeholder" Style="@Style" Class="@Class" Dense Margin="Margin.Dense" Variant="Variant.Outlined" Clearable="Clearable" FullWidth="FullWidth" Required="Required" Value="Value" ValueChanged="ValueChanged" For="For">
    @foreach (var item in Items)
    {
        <MudSelectItem @key="KeyGetter(item)" T="T" Value="KeyGetter(item)">
            @SelectItem(item)
        </MudSelectItem>
    }
</MudSelect>


@code {
    [Parameter, EditorRequired]
    public required List<TItem> Items { get; set; } = [];

    [Parameter, EditorRequired]
    public required string Label { get; set; } = null!;

    [Parameter]
    public RenderFragment<TItem> SelectItem { get; set; } = null!;

    [Parameter, EditorRequired]
    public required Func<TItem, T> KeyGetter { get; set; } = null!;

    [Parameter]
    public string Placeholder { get; set; } = null!;

    [Parameter]
    public string Style { get; set; } = null!;

    [Parameter]
    public string Class { get; set; } = null!;

    [Parameter]
    public bool Clearable { get; set; }

    [Parameter]
    public bool FullWidth { get; set; }

    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public T Value { get; set; } = default!;

    [Parameter]
    public EventCallback<T> ValueChanged { get; set; }

    [Parameter]
    public Expression<Func<T>>? For { get; set; }
}
